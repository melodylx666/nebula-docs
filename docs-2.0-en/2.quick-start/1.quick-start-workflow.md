# Quickly deploy NebulaGraph using Docker

You can quickly get started with NebulaGraph by deploying NebulaGraph with Docker Desktop or Docker Compose. 

=== "Using Docker Desktop"

    NebulaGraph is available as a [Docker Extension](https://hub.docker.com/extensions/weygu/nebulagraph-dd-ext) that you can easily install and run on your Docker Desktop. You can quickly deploy NebulaGraph using Docker Desktop with just one click.

    1. Install [Docker Desktop](https://www.docker.com/products/docker-desktop/).
  
      !!! caution

            We do not recommend you deploy {{nebula.name}} on Docker Desktop for Windows due to its subpar performance. For details, see [#12401](https://github.com/docker/for-win/issues/12401). If you must use Docker Desktop for Windows, install [WSL 2](https://docs.docker.com/desktop/install/windows-install/#system-requirements) first.

    2. In the left sidebar of Docker Desktop, click **Extensions** or **Add Extensions**.
    3. On the Extensions Marketplace, search for NebulaGraph and click **Install**.

      ![docker](https://docs-cdn.nebula-graph.com.cn/figures/docker.png)

      Click **Update** to update NebulaGraph to the latest version when a new version is available.

      ![docker-update](https://docs-cdn.nebula-graph.com.cn/figures/docker-update.png)

    4. Click **Open** to navigate to the NebulaGraph extension page.

    5. At the top of the page, click **Studio in Browser** to use NebulaGraph.

    6. Use basic nGQL commands. For more information, see [Use nGQL (CRUD)](../../2.quick-start/4.nebula-graph-crud.md).

    For more information about how to use NebulaGraph with Docker Desktop, see the following video:

    <iframe width="560" height="315" src="https://www.youtube.com/embed/8zKer-4RXEg" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>


=== "Using Docker Compose"

    Using Docker Compose can quickly deploy NebulaGraph services based on the prepared configuration file. It is only recommended to use this method when testing the functions of NebulaGraph.

    ## Prerequisites

    * You have installed the following applications on your host.

      | Application    | Recommended version | Official installation reference                                    |
      | -------------- | ------------------- | ------------------------------------------------------------------ |
      | Docker         | Latest              | [Install Docker Engine](https://docs.docker.com/engine/install/)   |
      | Docker Compose | Latest              | [Install Docker Compose](https://docs.docker.com/compose/install/) |
      | Git            | Latest              | [Download Git](https://git-scm.com/download/)       |

    * If you are deploying NebulaGraph as a non-root user, grant the user with Docker-related privileges. For detailed instructions, see [Manage Docker as a non-root user](https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user).

    * You have started the Docker service on your host.

    * If you have already deployed another version of NebulaGraph with Docker Compose on your host, to avoid compatibility issues, you need to delete the `nebula-docker-compose/data` directory.

    ## Deploy NebulaGraph


    1. Clone the `{{dockercompose.release}}` branch of the `nebula-docker-compose` repository to your host with Git.

      !!! danger

            The `master` branch contains the untested code for the latest NebulaGraph development release. **DO NOT** use this release in a production environment.

        ```bash
        $ git clone -b {{dockercompose.branch}} https://github.com/vesoft-inc/nebula-docker-compose.git
        ```

      !!! note

            The `x.y` version of Docker Compose aligns to the `x.y` version of NebulaGraph. For the NebulaGraph `z` version, Docker Compose does not publish the corresponding `z` version, but pulls the `z` version of the NebulaGraph image.

    2. Go to the `nebula-docker-compose` directory.

        ```bash
        $ cd nebula-docker-compose/
        ```

    3. Run the following command to start all the NebulaGraph services.

    
      !!! note

            - Update the [NebulaGraph images](#how_to_upgrade_or_update_the_docker_images_of_nebulagraph_services) and [NebulaGraph Console images](#how_to_update_the_nebulagraph_console_client) first if they are out of date.
            - The return result after executing the command varies depending on the installation directory.

        ```bash
        [nebula-docker-compose]$ docker-compose up -d
        Creating nebula-docker-compose_metad0_1 ... done
        Creating nebula-docker-compose_metad2_1 ... done
        Creating nebula-docker-compose_metad1_1 ... done
        Creating nebula-docker-compose_graphd2_1   ... done
        Creating nebula-docker-compose_graphd_1    ... done
        Creating nebula-docker-compose_graphd1_1   ... done
        Creating nebula-docker-compose_storaged0_1 ... done
        Creating nebula-docker-compose_storaged2_1 ... done
        Creating nebula-docker-compose_storaged1_1 ... done
        ```

      !!! compatibility
            
            Starting from NebulaGraph version 3.1.0, nebula-docker-compose automatically starts a NebulaGraph Console docker container and adds the storage host to the cluster (i.e. `ADD HOSTS` command).

      !!! note

            For more information of the preceding services, see [NebulaGraph architecture](../1.introduction/3.nebula-graph-architecture/1.architecture-overview.md).

    ## Connect to NebulaGraph

    There are two ways to connect to NebulaGraph:

    - Connected with Nebula Console outside the container. Because the external mapping port for the Graph service is also fixed as `9669` in the container's configuration file, you can connect directly through the default port. For details, see [Connect to NebulaGraph](../2.quick-start/3.connect-to-nebula-graph.md).

    - Log into the container installed NebulaGraph Console, then connect to the Graph service. This section describes this approach.

    1. Run the following command to view the name of NebulaGraph Console docker container.

      ```bash
      $ docker-compose ps
                Name                         Command             State                 Ports
      --------------------------------------------------------------------------------------------
      nebula-docker-compose_console_1     sh -c sleep 3 &&          Up
                                        nebula-co ...
      ......
      ```

    2. Run the following command to enter the NebulaGraph Console docker container.

      ```bash
      docker exec -it nebula-docker-compose_console_1 /bin/sh
      / #
      ```

    3. Connect to NebulaGraph with NebulaGraph Console.

      ```bash
      / # ./usr/local/bin/nebula-console -u <user_name> -p <password> --address=graphd --port=9669
      ```

      !!! note

            By default, the authentication is off, you can only log in with an existing username (the default is `root`) and any password. To turn it on, see [Enable authentication](../7.data-security/1.authentication/1.authentication.md).

    4. Run the following commands to view the cluster state.

      ```bash
      nebula> SHOW HOSTS;
      +-------------+------+----------+--------------+----------------------+------------------------+---------+
      | Host        | Port | Status   | Leader count | Leader distribution  | Partition distribution | Version |
      +-------------+------+----------+--------------+----------------------+------------------------+---------+
      | "storaged0" | 9779 | "ONLINE" | 0            | "No valid partition" | "No valid partition"   | "{{nebula.release}}" |
      | "storaged1" | 9779 | "ONLINE" | 0            | "No valid partition" | "No valid partition"   | "{{nebula.release}}" |
      | "storaged2" | 9779 | "ONLINE" | 0            | "No valid partition" | "No valid partition"   | "{{nebula.release}}" |
      +-------------+------+----------+--------------+----------------------+------------------------+---------+
      ```
    5. Use basic nGQL commands. For more information, see [Use nGQL (CRUD)](../../2.quick-start/4.nebula-graph-crud.md).
    
    Run `exit` twice to switch back to your terminal (shell).

    